{% extends 'base.html' %}

{% block lobbyButton %}
<div class="flex-1">
  <a href="/post" class="flex items-center btn btn-ghost">
      <span class="self-center text-xl font-semibold whitespace-nowrap">#createOrg</span>
  </a>
</div>
{% endblock %}

{% block title %}Org Creation{% endblock %}
{%block content%}


                <div class="flex flex-col">
                  Let's get started registering your business onto our platform.
                  <div class="flex flex-row gap-8 mt-4">
                
                    <div class="flex flex-col flex-1 grow">
                      <div class="card w-full bg-base-300 p-4">
                        <form method="post" class="card-body p-4">
                
                          <div>
                            <span class="label-text m-0">Organization Name</span>
                            <input id="name" name="name" type="text" placeholder="" class="input input-sm input-bordered bg-base-200 w-full h-8 m-0" required maxlength="30"/>
                          </div>

                          <div>
                            <span class="label-text m-0">Organization Logo Url</span>
                            <input id="logo_url" name="logo_url" type="url" placeholder="" class="input input-sm input-bordered bg-base-200 w-full h-8 m-0" required maxlength="500"/>
                          </div>

                          <div class="w-full relative">
                            <span class="label-text m-0">Tagline</span>
                            <input name="tagline" id="tagline" type="text" placeholder="" class="input input-sm input-bordered bg-base-200 w-full h-8 m-0" maxlength="100"/>
                            <p id="limit_tagline" class="label-text m-0 text-right absolute right-0">0/100</p>
                          </div>
                
                          <div>
                            <span class="label-text m-0">Industry</span>
                            <input name="industry" id="industry" type="text" placeholder="Type here" class="input input-sm input-bordered bg-base-200 w-full h-8 m-0" required />
                          </div>
                
                          <div>
                            <span class="label-text m-0">Organization Size</span>
                            <select name="size" id="orgSize" placeholder="Type here" class="input input-sm input-bordered bg-base-200 w-full h-8 m-0 pl-2" required>
                              <option hidden selected>Click Me!</option>
                              <option value="0-10">0-10</option>
                              <option value="10-100">10-100</option>
                              <option value="100-1000">100-1000</option>
                              <option value="1000+">1000+</option>
                            </select>
                          </div>

                          <div>
                            <span class="label-text m-0">Website</span>
                            <input name="website" id="website" type="url" placeholder="https:/...com" class="input input-sm input-bordered bg-base-200 w-full h-8 m-0" required />
                          </div>

                          <div class="mt-1">
                            <button class="btn btn-primary">
                              Submit
                            </button>
                          </div>
                
                        </form>
                
                      </div>
                    </div>
                
                    <div class="flex flex-col flex-1 grow">
                      <div class="card w-full bg-base-300 p-4 border">
                        <div class="card-body p-2">
                          <div class="flex flex-col gap-1">
                            <div class="avatar">
                              <div class="w-20 rounded-lg"><img id="logo" src="https://avatars.githubusercontent.com/u/{{session.token}}?v=4"
                                  alt="Tailwind-CSS-Avatar-component" /></div>
                            </div>
                            <h2 id="cardTitle" class="card-title">Organization Name</h2>
                            <p id="tagline_preview" class="text-base no-wrap">Tagline</p>
                            <div>
                              <div class="flex flex-row items-center gap-2 mt-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current" viewBox="0 0 640 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M480 48c0-26.5-21.5-48-48-48H336c-26.5 0-48 21.5-48 48V96H224V24c0-13.3-10.7-24-24-24s-24 10.7-24 24V96H112V24c0-13.3-10.7-24-24-24S64 10.7 64 24V96H48C21.5 96 0 117.5 0 144v96V464c0 26.5 21.5 48 48 48H304h32 96H592c26.5 0 48-21.5 48-48V240c0-26.5-21.5-48-48-48H480V48zm96 320v32c0 8.8-7.2 16-16 16H528c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16zM240 416H208c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16zM128 400c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zM560 256c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H528c-8.8 0-16-7.2-16-16V272c0-8.8 7.2-16 16-16h32zM256 176v32c0 8.8-7.2 16-16 16H208c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16zM112 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h32zM256 304c0 8.8-7.2 16-16 16H208c-8.8 0-16-7.2-16-16V272c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zM112 320H80c-8.8 0-16-7.2-16-16V272c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16zm304-48v32c0 8.8-7.2 16-16 16H368c-8.8 0-16-7.2-16-16V272c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16zM400 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H368c-8.8 0-16-7.2-16-16V80c0-8.8 7.2-16 16-16h32zm16 112v32c0 8.8-7.2 16-16 16H368c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16z"/></svg>
                                <p id="industry_preview" class="text-base">Industry</p>
                              </div>
                              
                              <div class="flex flex-row items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current" viewBox="0 0 640 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"/></svg>
                                <p id="orgSize_preview" class="text-base">Size</p>
                              </div>
                            </div>


                            <div id="website_button" class="mt-2">
                              <a id="website_link" href="http://www.google.com/">
                              <button class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"  viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M432 64H208c-8.8 0-16 7.2-16 16V96H128V80c0-44.2 35.8-80 80-80H432c44.2 0 80 35.8 80 80V304c0 44.2-35.8 80-80 80H416V320h16c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16zM0 192c0-35.3 28.7-64 64-64H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192zm64 32c0 17.7 14.3 32 32 32H288c17.7 0 32-14.3 32-32s-14.3-32-32-32H96c-17.7 0-32 14.3-32 32z"/></svg>
                                Website
                              </button>
                            </a>
                            </div>
  



                          </div>
                        </div>
                
                      </div>
                    </div>
                
                  </div>
                
                </div>
                
            

          <script>
            document.getElementById("website_button").style.display="none";

            // Select all input fields in the first column
            var inputFields = document.querySelectorAll('.flex-1 input');

            // Add input event listener to each input field
            inputFields.forEach(function(inputField) {
              inputField.addEventListener('input', function() {
                // Get values from the first column
                var orgName = document.querySelector('#name').value;
                var orgLogo = document.querySelector('#logo_url').value;
                var website = document.querySelector('#website').value;
                var industry = document.querySelector('#industry').value;
                var tagline = document.querySelector('#tagline').value;
                var tagsize = tagline.length;
                var website_link = document.querySelector("#website").value;


                document.querySelector('#cardTitle').textContent = defaultTo(orgName, "Organization Name");
                if (orgLogo) {
                  document.getElementById("logo").src=orgLogo;
                } else {
                  document.getElementById("logo").src="https://avatars.githubusercontent.com/u/{{session.token}}?v=4";
                }
                document.querySelector('#industry_preview').textContent = defaultTo(industry, "Industry");
                document.querySelector('#limit_tagline').textContent=tagsize+"/100";
                document.querySelector('#tagline_preview').textContent=defaultTo(tagline, "Tagline");

                if (website_link.includes("https://")) {
                  document.getElementById("website_button").style.display=defaultTo(website_link,"none","block");
                  document.getElementById("website_link").href=website_link;
                } else {
                  document.getElementById("website_button").style.display="none";
                }
                
                

              });
            });


            var orgSizeSelect = document.getElementById("orgSize");

            // Adding an event listener for the "change" event
            orgSizeSelect.addEventListener("change", function() {
              var org_size = document.querySelector("#orgSize").value;
                console.log(org_size);
                document.querySelector("#orgSize_preview").textContent=org_size;
            });
            


            function defaultTo(check, default_str, alternative_check_answer) {
              if (check) {
                if(alternative_check_answer) {
                  return alternative_check_answer;
                } else {
                  return check;
                }
                
              } else {
                return default_str;
              }
            }
          </script>

{%endblock%}